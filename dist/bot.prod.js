"use strict";var Discord=require("discord.js"),_require=require("./config.json"),prefix=_require.prefix,hp_token=_require.hp_token,DBL_TOKEN=_require.DBL_TOKEN,BOT_LOGIN=_require.BOT_LOGIN,fs=require("fs"),responses=require("./responses.js"),client=new Discord.Client;client.commands=new Discord.Collection,client.functions=new Discord.Collection;var cooldowns=new Discord.Collection;client.responses=new Discord.Collection;var commandFiles=fs.readdirSync("./commands").filter(function(e){return e.endsWith(".js")}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=commandFiles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value,command=require("./commands/".concat(file));client.commands.set(command.name,command)}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}console.log(client.commands),client.on("message",function(o){if(!o.author.bot&&(responses.sendResponse(o),0===o.content.indexOf(prefix))){var e=o.content.slice(prefix.length).split(/ +/g),r=e.shift().toLowerCase(),n=client.commands.get(r)||client.commands.find(function(e){return e.aliases&&e.aliases.includes(r)});cooldowns.has(n.name)||cooldowns.set(n.name,new Discord.Collection);var t=Date.now(),i=cooldowns.get(n.name),c=1e3*(n.cooldown||3);if(i.has(o.author.id)){var s=i.get(o.author.id)+c;if(t<s){var a=(s-t)/1e3;return o.reply("please wait ".concat(a.toFixed(1)," more second(s) before reusing the `").concat(n.name,"` command."))}}i.set(o.author.id,t),setTimeout(function(){return i.delete(o.author.id)},c),console.log(n);try{n.execute(o,e)}catch(e){console.error(e),o.reply("there was an error trying to execute that command!")}}});var DBL=require("dblapi.js"),dbl=new DBL(DBL_TOKEN,client);dbl.on("posted",function(){console.log("Server count posted!")}),dbl.on("error",function(e){console.log("Oops! ".concat(e))}),client.once("ready",function(e){client.user.setActivity("".concat(prefix,"help"),{type:"LISTENING"}),console.log("I'm ready.")}),client.on("error",console.error),client.on("unhandledRejection",console.error),client.login(BOT_LOGIN).catch(console.error);