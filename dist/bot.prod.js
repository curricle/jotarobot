"use strict";var Discord=require("discord.js"),_require=require("./config.json"),prefix=_require.prefix,hp_token=_require.hp_token,DBL_TOKEN=_require.DBL_TOKEN,BOT_LOGIN=_require.BOT_LOGIN,fs=require("fs"),responses=require("./responses.js"),client=new Discord.Client;client.commands=new Discord.Collection,client.functions=new Discord.Collection;var cooldowns=new Discord.Collection;client.responses=new Discord.Collection;var commandFiles=fs.readdirSync("./commands").filter(function(e){return e.endsWith(".js")}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=commandFiles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value,command=require("./commands/".concat(file));client.commands.set(command.name,command)}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}client.on("message",function(r){if(!r.author.bot&&(responses.sendResponse(r),r.content.startsWith(prefix))){var e=r.content.slice(prefix.length).split(/ +/),o=e.shift().toLowerCase(),t=client.commands.get(o)||client.commands.find(function(e){return e.aliases&&e.aliases.includes(o)});if(t.guildOnly&&"text"!==r.channel.type)return r.reply("Can't execute that command inside DMs.");cooldowns.has(t.name)||cooldowns.set(t.name,new Discord.Collection);var n=Date.now(),i=cooldowns.get(t.name),c=1e3*(t.cooldown||3);if(i.has(r.author.id)){var s=i.get(r.author.id)+c;if(n<s){var a=(s-n)/1e3;return r.reply("please wait ".concat(a.toFixed(1)," more second(s) before reusing the `").concat(t.name,"` command."))}}i.set(r.author.id,n),setTimeout(function(){return i.delete(r.author.id)},c);try{t.execute(r,e)}catch(e){console.error(e),r.reply("there was an error trying to execute that command!")}}});var DBL=require("dblapi.js"),dbl=new DBL(DBL_TOKEN,client);dbl.on("posted",function(){console.log("Server count posted!")}),dbl.on("error",function(e){console.log("Oops! ".concat(e))}),client.once("ready",function(e){client.user.setActivity("".concat(prefix,"help"),{type:"LISTENING"}),console.log("I'm ready.")}),client.on("error",console.error),client.on("unhandledRejection",console.error),client.login(BOT_LOGIN).catch(console.error);